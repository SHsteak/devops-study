# Default values for argocd-deploy.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

nameOverride: ""
fullnameOverride: ""

global:
  repoURL: "https://github.com/choshsh/devops-study.git"
  # branch switch - prod/dev
  targetRevision: HEAD
  server: "https://kubernetes.default.svc"

argocd:
  # istio-config
  - name: istio-default
    namespace: default
    source:
      path: manifest/istio-default
      type: dir
      directory: true
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
  # jenkins
  - name: jenkins
    namespace: jenkins
    source:
      path: manifest/jenkins
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
  # # nfs-subdir-external-provisioner
  # - name: nfs-subdir-external-provisioner
  #   namespace: default
  #   source:
  #     path: manifest/nfs-subdir-external-provisioner
  #     type: helm
  #     helm:
  #       valueFiles:
  #         - values-choshsh.yaml
  #   syncPolicy:
  #     automated:
  #       prune: true
  #       selfHeal: true
  # itsm-db
  - name: choshsh-db
    namespace: default
    source:
      path: manifest/mysql
      type: dir
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
  # choshsh-ui-network
  - name: choshsh-ui-vs
    namespace: default
    source:
      path: manifest/was/network
      type: dir
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
  # choshsh-ui
  - name: choshsh-ui
    namespace: default
    source:
      path: manifest/was
      type: helm
      helm:
        valueFiles:
          - values-choshsh-ui.yaml
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
  # choshsh-ui-loadtest
  - name: choshsh-ui-loadtest
    namespace: default
    source:
      path: manifest/was
      type: helm
      helm:
        valueFiles:
          - values-choshsh-ui-loadtest.yaml
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
  # jenkins-rest
  - name: jenkins-rest
    namespace: default
    source:
      path: manifest/was
      type: helm
      helm:
        valueFiles:
          - values-jenkins-rest.yaml
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
  # loki-network
  - name: loki-network
    namespace: monitoring
    source:
      path: manifest/loki-stack/network
      type: dir
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
  # Grafana
  - name: grafana
    namespace: monitoring
    source:
      path: manifest/grafana
      type: helm
      helm:
        valueFiles:
          - values-choshsh.yaml
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
